# 第一章 计算机组成和结构概述

## 1. 概述

## 2. 浮点数

**浮点数表示**

==N = 尾数 * 基数 ^指数^==

- 举个例子：1.25 * 10^5^
  - 1.25 是尾数，尾数越多，精度越高
  - ^5^ 是位数，位数越多，范围越大



**运算过程**

对阶 > 尾数计算 > 结果格式化



**特点**

- 一般尾数用补码，阶码用移码
- 阶码的位数决定数的表示范围，位数越多范围越大
- 位数的位数决定数的有效精度，位数越多精度越高
- 对阶时，小数向大数看齐
- 对阶时通过小数的位数向右移实现的





## 3. Flynn 分类法

|   体系结构类型   | 缩写 |                         结构                         |     关键特性                |                             代表                             |
| :--------------: | :--: | :--------------------------------------------------: | :------------------------------------: | :----------------------------------------------------------: |
| 单指令流单数据流 | SISD | 控制部分: 一个 <br />处理器: 一个<br />主存模块: 一个 |                                        |                         单处理器系统                         |
| 单指令流多数据流 | SIMD | 控制部分: 一个<br />处理器: 多个<br />主存模块: 多个 |   各处理器以异步的形式执行同一条指令   |     并行处理机<br />阵列处理机<br />超级向量处理机(GPU)      |
| 多指令流单数据流 | MISD | 控制部分: 一个<br />处理器: 一个<br />主存模块: 多个 |       被证明不可能, 至少是不实际       |             目前没有, 有文献称流水线计算机为此类             |
| 多指令流多数据流 | MIMD | 控制部分: 多个<br />处理器: 多个<br />主存模块: 多个 | 能够实现作业、任务、指令等各级全面并行 | 多核处理器(SMP、BMP、MP)<br />多处理机系统(MPP)<br />多计算机 |



1.3 CISC 与 RISC

- 复杂指令集计算机 ( CISC, Complex Instruction Set Computer)
- 精简指令集计算机 ( RISC, Reduced Instruction Set Computer)

| 指令系统类型 |                             指令                             | 寻址       |                       实现方式                       |            其他            | 代表 |
| :----------- | :----------------------------------------------------------: | ---------- | :--------------------------------------------------: | :------------------------: | ---- |
| CISC(复杂)   |              数量多, 使用频率差别大, 可变厂格式              | 支持多种   |                 微程序控制技术(微码)                 |         研制周期长         | X86  |
| RISC(精简)   | 数量少,  使用频率接近, 定长格式, 大部分为单周期指令, 操作寄存器, 只有 Load/Store 操作内存 | 支持方式少 | 增加了通用寄存器; 硬布线逻辑控制为主; 适合采用流水线 | 优化编译, 有效支持高级语言 | ARM  |



## 4. 流水线

### 4.1 流水线的计算公式

- 1条指令的执行时间 + ( 指令条数 - 1 ) * 流水线周期
- 理论公式: ( t~1~ + t~2~ + t~k~ ) + ( n - 1) * t
  - ( t~1~ + t~2~ + t~k~ ) ：流水线建立时间
  - n：指令条数，一条指令可以分为多个步骤，
    - 例如：取指、分析、执行，这三个合一起就是一条指令，n 就是这条指令需要重复执行 n 次
  - t：流水线周期，一般是  t~1~ + t~2~ + t~k~ 中的最大值，
    - 例如：取指 3 △t，分析 2 △t，执行 4 △t，那么流水线周期一般为 4△t
- 实践公式: k * t + ( n - 1 ) * t
  - k：段数，步骤
    - 例如：取指、分析、执行，这就是 3 个步骤，所以 k 为 3
  - t：流水线周期
    - 每个步骤的最大值



**举例**

​	一条指令的执行过程分为取指、分析和执行三步，在取指时间 t~取指~ = 3△t, 分析时间 t~分析~ = 2△t, 执行时间 t~执行~ = 4△t 的情况下, 10 条指令的执行时间是多少 ?



串行方式执行时间: 

解答: 

1）一条指令三个步骤的总执行时间为：2△t + 3 △t + 4△t = 9△t

2）10 条指令的执行时间： 9△t * 10 = 90△t



流水线周期(理论)：

解答：

1）代入公式 ==( t~1~ + t~2~ + t~k~ ) + ( n - 1) * t==

2）流水线建立时间：( t~1~ + t~2~ + t~k~ )  = 2△t + 3 △t + 4△t = 9△t

3）流水线周期 t 为单个步骤的时间最大值，也就是 4△t

4）指令条数 n 为 10

所以最后结果为: ( 2△t + 3 △t + 4△t  ) + ( 10 - 1 )  * 4△t = 45△t



流水线周期(实践):

解答：

1) 代入公式 ==k * t + ( n - 1 ) * t==

2) k: 步骤数, k = 3

3) t: 单个步骤最长执行时间 4△t

4) n: 指令条数

5) 最后结果: 3 * 4△t + ( 10 -1 ) * 4△t = 48△t



### 4.2 流水线吞吐率

流水线的吞吐率( TP, Though Put Rate ), 指在单位时间内流水线所完成的任务数量或输出的结果数量。

流水线吞吐率的最基本的工式为: 

==指令条数 / 流水线执行时间==



流水线最大吞吐率:

![20240118181010](https://raw.githubusercontent.com/xinyi1483/image/main/2024/20240118181010.png)

- t (流水线周期): 也就是使用时间最长的那一个步骤的值



**举例**

一条指令的执行过程分为取指、分析和执行三步，在取指时间 t~取指~ = 3△t, 分析时间 t~分析~ = 2△t, 执行时间 t~执行~ = 4△t 的情况下，最大吞吐率是多少 ?

解答：1/4△t



### 4.3 流水线加速比

​	完成同样一批任务, 不使用流水线所用的时间与使用流水线所用的时间之比称为流水线的加速比, 这个值一般大于 1

![20240118181652](https://cdn.jsdelivr.net/gh/xinyi1483/image@main/2024/20240118181652.png)



### 4.4 超标量流水线

​	超标量流水线，就是同时存在多条流水线，可以多条指令同时执行。



## 5. 计算机的组成结构

![20240119160643](https://cdn.jsdelivr.net/gh/xinyi1483/image@main/2024/20240119160643.png)

- 主存储器(内存)
- 辅助存储器(硬盘)



### 1.5.1 CPU 组成

- 运算器
  - 算数逻辑单元( ALU ): 数据的算数运算和逻辑运算
  - 累加寄存器( AC ): 通用寄存器, 为 ALU 提供一个工作区, 用来暂存数据
  - 数据缓冲寄存器( DR ): 写内存时, 暂存指令或数据
  - 状态条件寄存器( PSW ): 存状态标志与控制标志
    - 争议: 也有将其归为控制器的
- 控制器
  - 程序计数器( PC ): 存储下一条要执行指令的地址
  - 指令寄存器(  IR ): 存储即将执行的指令
  - 指令译码器( ID ): 对指令中的操作码字段进行分析解释
  - 时序部件: 提供时序控制信号



### 1.5.2 冯·诺依曼结构 和 哈弗结构

#### 冯·诺依曼结构

​	冯 · 诺依曼结构也称普林斯顿结构, 是一种将程序指令存储器和数据存储器合并在一起的存储器结构.

**特点:**

- 一般用于 PC 处理器, 如 i3, i5, i7 处理器
- 指令与数据存储器合并在一起
- 指令与数据都通过相同的数据总线传输



#### 哈弗结构

​	哈弗结构是一种将程序指令存储和数据存储分开的存储器结构. 哈弗结构是一种并行体系结构, 他的主要特点是将程序和数据存储在不同的存储空间中, 即程序存储器和数据存储器是两个独立的存储器, 每个存储器独立编制、独立访问。

**特点:**

- ==一般用于嵌入式系统处理器 ( DSP ) 数字信号处理器 ( DSP, Digital Signal Processing )==
- 指令与数据分开存储, 可以并行读取, 有较高数据的吞吐率
- 有 4 条总线: 指令和数据的数据总线与地址总线

![20240121123525](https://cdn.jsdelivr.net/gh/xinyi1483/image@main/2024/20240121123525.png)



## 6. Cache

### 6.1 Cache 概述

- Cache 的功能: 提高 CPU 数据输入输出的速率, 突破 冯·诺依曼瓶颈, 即 CPU 与存储系统间数据传送带宽限制.
- 在计算机的存储系统体系中, cache 是访问速度最快的层次
- Cache 对程序员来说是透明的.
- 使用 Cache 改善系统性能的依据是程序的局部性原理
  - 时间局部性: 指程序中的某条指令一旦执行, 不久后该指令可能再次执行, 典型原因是由于程序中存在着大量的循环操作.
  - 空间局部性: 指一旦程序访问了某个存储单元, 不久以后, 其附近的存储单元也将被访问, 即程序在一段时间内所访问的地址可能集中在一定的范围内, 其典型的情况是程序顺序执行.
  - 工作集理论: 工作集是进程运行时被频繁访问的页面集合.

- 使用 cache + 主存储器的系统的平均周期计算公式: ==t~3~ = h * t~1~ + ( 1 - h ) * t~2~==
  - h: 缓存命中率
  - t~1~: Cache 的周期时间
  - 1-h: 未命中率
  - t~2~: 主存储器周期时间



### 6.2 Cache 应用

#### 6.2.1 Cache 页面淘汰	

映像方式: 直接由硬件完成, 对程序员来说是透明的

- 直接相联映像: 硬件电路较简单, 但冲突率很高
- 全相联映像: 电路难于设计和实现, 只使用于小容量的 cache, 冲突率较低
- 组相联映像: 直接相联与全相联的折中



- 页面淘汰算法
  - 随机淘汰( RAND )
  - 先进先出算法( FIFO )
  - 近期最少使用算法( LRU )
  - 频繁计数器算法( LFU ): 统计使用次数, 淘汰少的
- Cache 读写过程
  - 写直达: 同时写 Cache 与内存
  - 写回: 只写 Cache, 淘汰页面时, 写回内存
  - 标记法: 只写入内存, 并将标志位清 0, 若用到此数据, 需要再次调取。
    - 用自己的话说: 数据写入到 cache 时, 设置一个有效位为 1
    - 修改数据时, 直接将数据写入到内存中, 并将 cache 中的有效位设置为 0, 证明数据已经被修改了. 
    - 读取数据时, 如果 cache 的有效位为 0, 数据未修改, 直接从 cache 中读取, 如果有效位为 1, 则证明数据被修改了, 直接从内存中读取



### 6.3 主存编址计算

#### 6.3.1 主存编址

- 存储单元
  - ==存储单元个数 = 最大地址 - 最小地址 + 1==
- 编址内容
  - 按字编址: 存储体的存储单元室字存储单元, 即最小寻址单位是一个字
    - 例如现在的 64 位计算机, 字长就是 64 bit
  - 按字节编址: 存储体的存储单元是字节存储单元, 即最小寻址单位是一个字节, 也就是 8bit
  - ==总容量 = 存储单元个数 * 编址内容==



------



#### 例题: 芯片数量计算

​	内存按字节编址, 利用 8K * 4bit 的存储器芯片构成 84000H 到 8FFFFH 的内存, 共需 () 片。



- 根据 8K * 4bit 的存储芯片得知, 每颗芯片容量为 8 * 2^10^ * 4bit
- 根据内存构成 84000H 到 8FFFFH 得知, 我们需要提供的总容量为 8FFFFH - 84000H + 1,
  - 90000H - 84000H = C000H = 12 * ( 2^4^)^3^
  - 个人理解: 16 进制中，每一位的 0 都可以表示为 2^4^
- 题中提到内存按字节编址, 所以需要的总容量还需要 * 8 bit
  - 总容量 = 12 * ( 2^4^)^3^ * 8bit
- 所以所需芯片数为: 总容量 / 每颗芯片容量
- 12 * ( 2^4^)^3^ * 8bit / 8 * 2^10^ * 4bit = 12 片



### 6.4 磁盘管理

#### 6.4.1 磁盘基本结构与存取过程

![20240121215310](https://cdn.jsdelivr.net/gh/xinyi1483/image@main/2024/20240121215310.png)



- ==存取时间 = 寻道时间 + 等待时间==, 寻道时间是指磁头移动到磁道所需的时间, 等待时间为等待读写的扇区转到磁头下方所用的时间.
- 平均存取时间 ( Average Access Time), 是指磁头找到指定数据的平均时间.
  - 平均存取时间是指磁头找到指定数据的平均时间, 通常它是硬盘平均寻道时间和平均潜伏时间 ( 等待时间 ) 之和. 平均存储时间最能代表硬盘找到某一数据所用的时间, 数值越小越好.
- ==平均访问时间 = 平均寻道时间 + 平均等待时间==



#### 6.4.2 磁盘优化分布存储



#### 6.4.2 磁盘单缓冲区与双缓冲区读取



#### 6.4.3 磁盘移臂调度算法

- 先来先服务 ( FCFS )
- 最短寻道时间优先 ( SSTF )
- 扫描算法 ( SCAN ): 也叫电梯算法, 从内侧依次扫描到外侧, 然后再从外侧扫描到内侧, 参考电梯的运行
  - 注: 不是一定从内到外, 这里只是举个例子
- 循环扫描算法 ( CSCAN ): 类似扫描算法, 但是不会有回程, 只会一遍遍的从内到外
  - 注: 不是一定从内到外, 这里只是举个例子



##### 6.4.3.1 先来先服务

![20240122144718](https://cdn.jsdelivr.net/gh/xinyi1483/image@main/2024/20240122144718.png)



##### 6.4.3.2 最短寻道时间优先

​	优先响应离当前磁头最近的磁道的数据, 也可以说是最近的柱面.

![20240122145112](https://cdn.jsdelivr.net/gh/xinyi1483/image@main/2024/20240122145112.png)





## 7. 总线

### 7.1 总线概述

- 总线是一组能为多个部件分时共享的公共信息传送线路
  - ==共享==
  - ==分时==: 是指同一时刻仅允许一个部件向总线发送信息, 但允许多个部件同时从总线上接收 ==相同的信息==.
- 串行总线与并行总线
  - 串行总线: 适合长距离传输
  - 并行总线: 适合近距离连接, 不宜过长
- 单工、半双工与全双工
- 总线宽度与总线带宽



### 7.2 总线的分类

- 数据总线 ( Data Bus, DB ): 在 CPU 与 RAM 之间来回传送需要处理或是需要储存的数据.
- 地址总线 ( Address Bus, AB ): 用来指定在 RAM ( Random Access Memory ) 之中存储的数据的地址.
- 控制总线 ( Control Bus, CB ): 将微处理器控制单元 ( Control Unit ) 的信号, 传送到周边设备.



## 8.校验码

### 8.1 奇偶校验

​	奇偶校验码的编码方法是: 由若干位有效信息 ( 如一个字节 ), 再加上一个二进制位 ( 校验位 ) 组成校验码.

- 奇校验: 整个校验码 ( 有效信息位和校验位 ) 中 "1" 的个数为奇数
  - 举个两个例子: 
  - 有效信息为 11001 ( 二进制 ), "1" 的个数为 3 个, 3为奇数, 所以校验位为 0, 最后结果为 110010 ( 数据后面拼接校验位 )
  - 有效信息为 11000 ( 二进制 ), "1" 的个数为 2 个, 2为偶数数, 所以校验位为 1, 最后结果为 110001
  - 总结: 数数据中 "1" 的数量, 如果 "1" 的数量不为奇数, 就在校验位补一个 "1" 让最后的结果中 "1" 的数量为奇数
- 偶校验: 整个校验码 ( 有效信息位和校验位 ) 中 "1" 的个数为偶数

==奇偶校验, 可检查 1 位的错误, 不可纠错==



### 8.2 循环校验码 CRC

==CRC 校验, 可检错, 不可纠错==

循环冗余校验 ( CRC, Cyclic Redundancy Check )



**编码方法**

​	在 k 位信息码之后拼接 r 位校验码. 应用 CRC 码的关键是如何从 k 位信息位简便的得到 r 位校验位 ( 编码 ), 以及如何从 k+r 位信息码判断是否出错.



**循环冗余校验码编码规律如下:**

1. 把待编码的 N 位有效信息表示为多项式 M( X )
2. 把 M(X) 左移 K 位, 得到 M(X) * X^k^, 这样空出了 K 位, 以便拼装 K 位余数 (即校验位)
3. 选取一个 K+1 位的产生多项式 G(X), 对 M(X) * X^K^ 做模 2 除
4. 把左移 K 位以后的有效信息与余数 R(X) 做模 2 加减, 拼接为 CRC 码, 此时的 CRC 码共有 N+K 位.
5. 把接收到的 CRC 码用约定的生成多项式 G(X) 去除, 如果正确, 则余数为 0, 如果某一位出错, 则余数不为 0. 不同的位数出错其余数不同, 余数和出错位序号之间有唯一的对应关系.



**模 2 除法**

​	模 2 除法是指在做除法运算的过程中不计其进位和借位的除法, 而是两者==相同为假不同为真==, 参考异或运算 (XOR).



**例题**

<img src="https://cdn.jsdelivr.net/gh/xinyi1483/image@main/2024/20240122162209.png" alt="20240122162209" style="zoom: 70%; float: left" />

- 右侧 "除数" 10011 的来源为生成多项式 G(X) = X^4^+X+1 产生的系数二进制
- 右侧 "被除数" 后面补的 0 的数量 (右侧 "被除数" 黑色下划线部分) 由于生成多项式中最高次幂决定, 也就是 X^4^ 中的4, 也就是 4 个"0"
- 求余数的时候, 开始的几位如果为 0 可以省略 (相同为假), 不列入余数内, 最后的结果结果等于生成多项式中最高次幂, 也就是 X^4^ 中的 4 位, 不足 4位的在前面补 0



### 8.3 海明校验

海明校验公式: 
$$
2^r + 1 \geq m + r
$$

- m: 数据位的位数
- r: 海明校验码位数



#### 发送端

- 设要传输的数据为 101101100

- 可得知 m = 9,  所以 r 的最小值为 4, 数据位+校验位一共是 9+4=13位

- 校验码的位置: 2^k^, k的值为 0 ~ (r-1), 也就是0, 1, 2, 3，所以校验码的位置为2^0^, 2^1^, 2^2^, 2^3^, 也就是4个验证码位置分别为 1, 2, 3, 8 (位置从1开始, 不是从0开始)

- 将校验码放到需要传输的数据中, 暂时不确定校验码是什么, 所以用 H 代替校验码 

  - H~1~H~2~1H~3~011H~4~01100
  - H~1~ 的位置为 2^0^
  - H~2~ 的位置为 2^1^
  - H~3~ 的位置为 2^2^
  - H~4~ 的位置为 2^3^

- 将所有数据位用 2^n^ + 2^n+1^ + 2^n+2^ 这种方式表示出来, 这里表示的是数据位的位置, 不是具体的值, 箭头后面是数据位的值

  | 位置 | 位置表示           | 说明            | 值   |
  | :--: | ------------------ | --------------- | ---- |
  |  1   | 2^0^               | H~1~ 校验码位置 |      |
  |  2   | 2^1^               | H~2~ 校验码位置 |      |
  |  3   | 2^1^ + 2^0^        |                 | 1    |
  |  4   | 2^2^               | H~3~ 校验码位置 |      |
  |  5   | 2^2^ + 2^0^        |                 | 0    |
  |  6   | 2^2^ + 2^1^        |                 | 1    |
  |  7   | 2^2^ + 2^1^ + 2^0^ |                 | 1    |
  |  8   | 2^3^               | H~4~ 校验码位置 |      |
  |  9   | 2^3^ + 2^0^        |                 | 0    |
  |  10  | 2^3^ + 2^1^        |                 | 1    |
  |  11  | 2^3^ + 2^1^ + 2^0^ |                 | 1    |
  |  12  | 2^3^ + 2^2^        |                 | 0    |
  |  13  | 2^3^ + 2^2^ + 2^0^ |                 | 0    |



- 海明校验使用的是偶校验, 也就是算上校验位, "1" 的数量要为偶数
- H~1~ 的位置是 2^0^ , 统计上面表中所有位置表示中包含 2^0^ 的数据位, 也就是需要负责第
  -  3、5、7、9、11、13, 将这几个位置的数据位拼接起来就是 101010, 3个"1", 所以 H^1^ 的位置填的是 1
- H~2~ 的位置是 2^1^, 负责第
  - 3、6、7、10、11, 拼接起来的值为 11111, 5个 "1", 所以 H~2~ 的位置填的是 1
- H~3~ 的位置是 2^2^, 负责第
  - 5、6、7、12、13, 拼接的结果为 01100, 2个 "1", 所以 H~3~ 的值为 0
- H~4~ 的位置是 2^3^ , 负责第
  - 9、10、11、12、13, 拼接结果为 01100, 2个 "1", 所以 H~4~ 的值为 0

- 最后的结果为

|   1   |   2   |  3   |   4   |  5   |  6   |  7   |   8   |  9   |  10  |  11  |  12  |  13  |
| :---: | :---: | :--: | :---: | :--: | :--: | :--: | :---: | :--: | :--: | :--: | :--: | :--: |
| ==1== | ==1== |  1   | ==0== |  0   |  1   |  1   | ==0== |  0   |  1   |  1   |  0   |  0   |



#### 接收端

​	假设第 11 为的值发生了错误

|   1   |   2   |  3   |   4   |  5   |  6   |  7   |   8   |  9   |  10  |  11  |  12  |  13  |
| :---: | :---: | :--: | :---: | :--: | :--: | :--: | :---: | :--: | :--: | :--: | :--: | :--: |
| ==1== | ==1== |  1   | ==0== |  0   |  1   |  1   | ==0== |  0   |  1   |  0   |  0   |  0   |

按照上面的计算方式, 加上校验位自身, 进行异或计算( 或者统计 "1" 的数量)

- H~1~ 负责的 H~1~、3、5、7、9、11、13, 拼接 [ 1101000 ], 1个数据为 3, 异常
- H~2~ 负责的 H~2~、3、6、7、10、11, 拼接 [ 111110 ], 5个 "1" , 异常
- H~3~ 负责的 H~3~、5、6、7、12、13, 拼接 [ 001100 ], 2个 "1", 正常
- H~4~ 负责的 H~4~、9、10、11、12、13, 拼接 [ 001000 ], 1个 "1", 异常
- 综合上面的情况, 发生错误的位置在 H~1~、H~2~、H~4~ 的位置上
  - 找出 H~1~、H~2~、H~4~ 包含的共同的位, 
  - 剔除 H~3~ 中出现过的位
  - 最后查到是第 11 位出现异常



### 8.4 总结

<img src="https://cdn.jsdelivr.net/gh/xinyi1483/image@main/2024/20240122172954.png" alt="20240122172954" style="zoom: 67%;" />







# 第二章 计算机网络

![20240122203846](https://cdn.jsdelivr.net/gh/xinyi1483/image@main/2024/20240122203846.png)



## 1.计算机网络概述

### 1.1.TCP/IP协议

![20240122214307](https://cdn.jsdelivr.net/gh/xinyi1483/image@main/2024/20240122214307.png)



#### 1.2.常见协议的端口及功能

![20240122215031](https://cdn.jsdelivr.net/gh/xinyi1483/image@main/2024/20240122215031.png)



#### 1.2.1.TCP 和 UDP 协议的异同点

![20240122215137](https://cdn.jsdelivr.net/gh/xinyi1483/image@main/2024/20240122215137.png)



### 1.2.DNS 服务应用

![20240122215825](https://cdn.jsdelivr.net/gh/xinyi1483/image@main/2024/20240122215825.png)



#### 1.2.1.查询顺序

![20240122220435](https://cdn.jsdelivr.net/gh/xinyi1483/image@main/2024/20240122220435.png)





### 1.3.DHCP 服务应用

动态主机配置协议 ( DHCP, Dynamic Hosts Configuration Protocol )

- 客户机/服务器模型
- 租约默认为 8 天
- 当租约过半时, 客户机需要向 DHCP 服务器申请续租.
- 当租约超过 87.5% 时, 如果仍然没有和当初提供 IP 的 DHCP 服务器联系上, 则开始联系其他的 DHCP 服务器.
- 分配方式
  - 固定分配 (管理员分配静态绑定固定的 IP 地址)
  - 动态分配 (为客户端分配租期为无限长的 IP 地址)
  - 自动分配 (为客户端分配具有一定有效期限的 IP 地址)
- 无效地址:
  - 169.254.X.X, Windows 无效 IP
  - 0.0.0.0, Linux 无效 IP



## 2.网络规划与设计

### 2.1.网络规划与设计

- 需求分析

  - 确定需求, 包括: 业务需求、用户需求、应用需求、计算机平台需求、网络通信需求等
  - 产物: 需求规范

- 通信规范分析

  - 现有的网络体系分析, 估计和测量通信量及设备利用率

  - 产物: 通信规范

- 逻辑网络设计

  - 选择符合需求的设计, 确定网络逻辑结构
  - 产物: 逻辑设计文档

- 物理网络设计

  - 将逻辑设计应用到物理空间, 确定网络物理结构.
  - 产物: 物理结构设计文档

- 实时阶段

  - 实现物理网络设计, 安装和维护.



#### 2.1.1.逻辑网络设计

​	逻辑网络设计师体现网络设计核心思想的关键阶段, 在这一阶段根据需求规范和通信规范, 选择一种比较适宜的网络逻辑结构, 并基于该逻辑结构实施后续的资源分配规划、安全规划等内容. 利用需求分析和现有网络体系分析的结果来设计逻辑网络结构, 最后得到一份逻辑网络设计文档.



**逻辑网络设计工作主要包括以下内容:**

1. 网络结构的设计
2. 物理层技术的选择
3. 局域网技术的选择与应用
4. 广域网技术的选择与应用
5. 地址设计和命名模型
6. 路由选择协议
7. 网络管理
8. 网络安全
9. 逻辑网络设计文档



**输出内容包括以下几点:**

- 逻辑网络设计图
- ==IP 地址方案==
- ==安全管理方案==
- ==具体的软/硬件、广域网连接设备和基本的网络服务==
- 招聘和培训网络员工的具体说明
- 对软/硬件费用、服务提供费用、员工和培训费用的初步估计



#### 2.1.2.物理网络设计

​	物理网络设计是对逻辑网络设计的物理实现, 通过对设备的具体物理分布、运行环境等确定, 确保网络的物理连接符合逻辑连接的要求. 在这一阶段, 网络设计者需要确定具体的软/硬件、连接设备、布线和服务的部署方案, 输出如下内容:

- 网络物理结构图和布线方案
- ==设备和部件的详细列表清单==
- 软硬件和安装费用的估算
- 安装日程表, 详细说明服务的时间以及期限
- 安装后的测试计划
- 用户的培训计划



#### 2.1.3.层次化网络设计

![20240123140128](https://cdn.jsdelivr.net/gh/xinyi1483/image@main/2024/20240123140128.png)



- ==核心层:== 主要是高速数据交换, 实现高速数据传输、出口路由, 常用冗余机制.
- ==汇聚层:== 网络访问策略控制、数据包处理和过滤、策略路由、广播域定义、寻址.
- ==接入层:== 主要是针对用户端, 实现用户接入、计费管理、MAC 地址认证、MAC 地址过滤、收集用户信息, 可以使用集线器代替交换机.
  - 注: 现在很少会出现集线器了, 一般都是采用的交换机, 考试可能会遇到集线器



## 3.网络存储技术

![20240123141037](https://cdn.jsdelivr.net/gh/xinyi1483/image@main/2024/20240123141037.png)



### 3.1.网络存储技术分类

- 直连式存储 ( DAS, Direct-Attached Storage)
- 网络附加存储 ( NAS, Network-Attached Storage )
- 存储区域网络 ( SAN, Storage Area Network )
- Internet 小型计算机系统接口 ( iSCSI, Internet Small Computer System Interface )



| 分类           | 特点                                                         |
| -------------- | ------------------------------------------------------------ |
| DAS/SAS        | 通过 SCSI 连接到服务器, 本身是硬件的堆叠, 不带有任何操作系统. 存储器必须被直接连接到应用服务器上, 不能跨平台共享文件, 各系统平台下文件分别存储. |
| NAS            | 通过网络接口与网络直接连接, 由用户通过网络访问 ( 支持多种 TCP / IP 协议 ). NAS 设备有自己的 OS, 类似于一个专用的文件服务器, 一般存储信息采用 RAID 进行管理. 即插即用. |
| SAN            | 通过专用高速网络将一个或多个网络存储设备和服务器连接起来的专用存储系统, 采用数据块的方式进行数据和信息的存储. 目前主要使用以太网 ( IP SAN ) 和光纤通道 ( FC SAN ) 两类环境. |
| IP-SAN / iSCSI | 基于 IP 网络实现, 设备成本低, 配置技术简单, 可共享和使用大容量的存储空间. |



## 4.IPv6

### 4.1.IPv6 概述

- IPv6 是设计用于替代现行版本 IP 协议 ( IPv4 ) 的下一代 IP 协议.
  - 寻址能力方面的扩展. IPv6 地址长度为 128 位, 地址空间增大了 2^96^ 倍.
  - 灵活的 IP 报文头部格式. 使用一系列固定格式的扩展头部取代了 IPv4 中可变长度的选项字段. IPv6 赵工选项部分的出现方式也有所变化, 使路由器可以简单路过选项而不做任何处理, 加快了报文处理速度.
  - IPv6 简化了报文头部格式, 字段只有 8 个, 加快报文转发, 提高了吞吐量.
  - 提高安全性. 身份认证和隐私权是 IPv6 的关键特性.
  - 支持更多的服务类型.
  - 允许协议继续演变, 增加新的功能, 使之适应未来技术的发展.



### 4.2.IPv6 与 IPv4 的异同点

- IPv4: 点分十进制
- IPv6: 冒分十六进制

- IPv6 地址由 8 个 16 进制字段构成. 例如

  - 2001:0db8:0000:0000:0000:0000:0370:7344

- IPv6 地址缩写

  - 连续多段 0 可以缩写为两个冒号, 但是只能出现 1 次
    - 2001:0db8::0370:7344
  - 高位的 0 可以省略不写, 可以出现多次, 例如: 0db8 可以写为 db8
    - 2001:db8::370:7344

  - 一段 0 可用一个 0 表示, 可以出现多次, 例如 0000 可以写为 0
    - 2001:0db8:0:0:0:0:0370:7344



- 单播地址 ( Unicast ): 用于单个接口的标识符, 传统的点对点通信.
  - 可聚合全球单播地址: 前缀 001
  - 本地单播地址:
    - 链路本地: 前缀为 1111111010 ( 一般以 fe80 开头 )
    - 站点本地: 前缀为 1111111011
- 组播地址 ( Multicast ): 多播地址, 一点对多点的通信, 数据包交付到一组计算机中的没一个. IPv6 没有广播术语, 而是将广播看做多播的一个特例.
  - 前缀为: 11111111
- 任播地址 ( Anycast ): 泛播地址, 这是 IPv6 增加的一种类型. 任播的目的站是一组计算机, 但数据包在交付时只交付给其中一个, 通常是距离最近的一个.
  - 前缀固定, 其余位置为 0



### 4.3.IPv6 地址分类

IPv6 规定每个网卡最少有 3 个 IPv6 地址, 分别是 ==链路本地地址 (对应局域网地址)==、==全球单播地址 (公网地址, 也就是 Windows 中的临时地址)== 和 ==回送地址 (站点本地地址, 环回地址 [ ::1 ], 对应 ipv4 的127)==.

IPv6 把自动 IP 地址配置作为标准功能, 只要计算机连接上网络便可自动分配 IP 地址.

- ==全状态自动配置 ( Stateful Auto-Configuration )==: IPv6 继承了 IPv4 动态主机配置协议 ( DHCP ) 这种自动配置服务.
- ==无状态自动配置 ( Stateless Auto-Configuration )==: 主机通过两个阶段分别获得链路本地地址和可决全球单播地址.
  - 首先主机将其网卡 MAC 地址附加在链路本地地址前缀 1111 1110 10 之后, 产生一个链路本地地址, 发出一个 ICMPv6 邻居发现请求, 验证其地址唯一性. 不唯一则使用功能随机接口 ID 组成一个新的链路本地地址.
  - 主机以链路本地地址为源地址, 向本地链路中所有路由器的组播 ICMPv6 路由器请求报文并返回一个包含可聚合全球单播地址前缀的路由器公告报文响应. 该地址前缀加上自己的接口 ID, 自动配置一个全球单播地址. 使用无状态自动配置, 无需用户手工干预就可以改变主机的 IPv6 地址.



### 4.4.IPv4/IPv6 过渡技术

- 双协议栈技术: 双栈技术通过节点对 IPv4 和 IPv6 双协议栈的支持, 从而支持两种业务的共存.
- 隧道技术: 隧道技术通过在 IPv4 网络中部署隧道, 实现在 IPv4 网络上对 IPv6 业务的承载, 保证业务的共存和过渡. 隧道技术包括:
  - 6to4 隧道
  - 6over4 隧道
  - ISATAP 隧道
- NAT-PT 技术: NAT-PT 使用网关设备连接 IPv6 和 IPv4 网络. 当 IPv4 和 IPv6 节点互相访问时, NAT-PT 网关实现两种协议的转换翻译和地址的映射.



## 5.网络接入技术

- 有线接入
  - 公用交换电话网络 ( PSTN )
  - 数字数据网 ( DDN )
  - 综合业务数字网 ( ISDN )
  - 非数字用户线路 ( ADSL )
  - 同轴光纤 ( HFC )
- 无线接入
  - IEEE 802.11 ( wifi )
  - IEEE 802.15 ( 蓝牙 Bluetooth )
  - 红外 ( IrDA )
  - WAPI



- 1G:
- 2G: 频谱效率高、容量大、语音质量高、安全性高
- 3G: 3G 采用 CDMA 技术, 加入了分组交换技术, 与 2G 系统相比, 3G 系统支持更多的用户, 实现更高的传输速率
- 4G: 在 20MHz 的频谱带宽下, 下行 100Mbit/s, 上行: 50Mbit/s
- 5G: 5G 系统的提升是全方位的, 高性能, 低延迟, 与高容量特性
  - 优点: 体现在毫米波、小基站、MIMO、双全工及波束成型 5 大技术
  - 目前试运行速率: 1Gbit/s, 最高速率: 10Gbit/s
  - 注: 中兴层实验速率高达 50Gbit/s 的 5G 网络 



## 6.综合布线系统

<img src="https://cdn.jsdelivr.net/gh/xinyi1483/image@main/2024/20240124144124.png" alt="20240124144124" style="zoom:67%;" />



- ==工作区子系统== 由信息插座、插座盒、连接跳线和适配器组成.
- ==水平子系统== 由一个工作区的信息插座开始, 经水平布置到管理区的内测配线架的线缆所组成.
- ==管理子系统== 由交连、互联配线架组成. 管理子系统为连接其他子系统提供连接手段.
- ==垂直干线子系统== 由建筑物内所有垂直干线多对数电缆及相关支撑硬件组成, 以提供设备间总配线架与干线接线间楼层配线架之间的干线路由.
- ==设备间子系统== 是由设备间中的电缆、连接器和有关的支撑硬件组成, 作用是将计算机、PBX、摄像头、监视器等弱电设备互联起来并连接到主配线架上.
- ==建筑群子系统== (园区子系统) 将一个建筑物的电缆延伸到建筑群的另外一些建筑物中的通信设备和装置上, 是结构化布线系统的一部分, 支持提供楼群之间通信所需的硬件. 它由电缆、光缆和入楼处的过流过压电器保护设备等相关硬件组成, 常用介质是光缆.



## 7.物联网

​	物联网 ( The Internet of Things ) 是实现物物相连的互联网络, 其内涵包含两个方面:

- 物联网的核心共和基础仍然是互联网, 是在互联网基础上延伸和扩展的网络
- 其用户端延伸和扩展到了任何物体与物体之间, 使其进行信息交换和通信



### 7.1.物联网的概念与分层

- 感知层: 识别物体、采集信息. 如: 二维码、RFID、摄像头、传感器 (温度、湿度)
- 网络层: 传递信息和处理信息. 通信网与互联网的融合网络、网络管理中心、信息中心和智能处理中心等
- 应用层: 解决信息处理和人机交互的问题



### 7.2.RFID

​	射频识别技术 ( Radio Frequency Identification, RFID ), 又称电子标签, 是一种通信技术, 可通过无线电讯号识别特定目标并读写相关数据, 而无需识别系统与特定目标之间建立机械或光学接触. 该技术是物联网的一项核心技术, 很多物联网应用都离不开它.

​	RFID 的基本组成部分通常包括: 标签、阅读器、天线.

![20240124150425](https://cdn.jsdelivr.net/gh/xinyi1483/image@main/2024/20240124150425.png)



### 7.3.二维码

​	二维码是用某种特定的集合图形按一定规律在平面 ( 二维方向上 ) 分布的黑白相间的图形记录数据符号信息. 在代码编制上巧妙的利用构成计算机内部逻辑基础的 "0" / "1" 比特流的概念, 使用若干个与二进制相对应的几何形体来表示文字数值信息, 通过图像输入设备或光电扫描设备自动识读以实现信息自动处理.

​	二维码中, 常用的码制有: Data Matrix, Maxi Code, Aztec, QR code, Vericode, PDF417, Ultracode, Code 49, Code 16K



- PDF417
  - 若采用扩展的字母数字压缩格式, 可容纳 1850 个字符
  - 若采用二进制 / ASCII 格式, 可容纳 1108 个字节
  - 若采用数字压缩格式, 可容纳 2710 个数字



## 8.云计算

### 8.1.云计算的概念与特点

​	云计算是一种基于互联网的计算方式, 通过这种方式, 共享的软硬件资源和信息可以按需提供个计算机和其他设备. 云其实是网络、互联网的一种比喻说法。云计算的核心思想, 是将大量用网络连接的计算资源统一管理和调度, 构成一个计算资源池向用户按需提供服务. 提供资源的网络被称为 "云". 狭义云计算指 IT 基础设施的交付和使用模式, 指通过网络以按需、易扩展的方式获得所需资源; 广义云计算指服务的交付和使用模式, 指通过网络以按需、易扩展的方式获得所需服务。这种服务可以是 IT 和软件、互联网相关, 也可是其他服务.



**特点**

- 集合了大量计算机, 规模达到成千上万
- 多种软硬件技术相结合
- 对客户端设备的要求低
- 规模化效应



- 软件即服务 ( SaaS )
- 平台即服务 ( PaaS )
- 基础设施即服务 ( Laas )









# 第三章 数学与经济管理



- 图论应用
  - 最小生成树 (☆☆)
  - 最短路径 (☆)
  - 网络与最大流量 (☆)
- 运筹方法
  - 关键路径法 (☆☆☆)
  - 线性规划 (☆☆☆)
  - 动态规划 (☆☆)
  - 预测与决策 (☆☆☆)
- 数学建模 (☆)



## 1.图论

### 1.1.最小生成树

**最小生成树:**

- 所有顶点接入
- 没有回路
- 权值之和最小



**例题1:**

​	某小区有七栋楼房 ① ~ ⑦ (见下图), 各楼房之间可修燃气管道路线的长度 (单位: 百米) 已标记在连线旁. 为修建连通各个楼房的燃气管道, 该小区内部燃气管道的总长度至少为多少百米?

![20240125144235](https://cdn.jsdelivr.net/gh/xinyi1483/image@main/2024/20240125144235.png)



#### 克鲁斯卡尔算法: 最短边

1. 找出最短的边, 也就是 ③-⑥, 长度为 2
2. 继续找最短的边, ①-②, ③-⑦, 长度为 3
3. 继续找最短的边, ②-⑥, 长度为 4
4. 继续找最短的边, ④-⑦, 长度为 5
5. 继续找最短的边, ②-⑤, ③-④, 长度为 6, 但是这里 ③-④ 形成了回路, 所以舍弃 ③-④
6. 最后结果是 23

![20240125144744](https://cdn.jsdelivr.net/gh/xinyi1483/image@main/2024/20240125144744.png)



#### 普里姆算法: 最近顶点

==注意:== 普里姆算法考虑的是未接入的所有点距离已接入的所有点中最近的, 而不是当前点.

1. 举个例子从最上面的 ① 号点开始, 和 ① 相连的最短的边是 ①-②, 长度为 3
2. 然后找和 ① 或者 ② 顶点连接的最短的边为 ②-⑥, 长度为 4
3. 然后找和 ①②⑥ 连接的最短的边为 ⑥-③, 长度为 2
4. 参考下图, 依次连接, 最后得出结果

![20240125225439](https://cdn.jsdelivr.net/gh/xinyi1483/image@main/2024/20240125225439.png)





### 1.2.最短路径

![20240125230118](https://cdn.jsdelivr.net/gh/xinyi1483/image@main/2024/20240125230118.png)



**解题思路:** 从起点开始, 依次计算到达每个顶点的最短路径

- 从 s 开始, 到达 ① 的最短路径为 25
- 到达 ② 的最短路径为: s-②, 长度为 21
- 到达 ③ 的路径(41)
  - s②③: 也就是 ② 的最短路径 + ②-③ 的路径 = 21 + 20 = 41
- 到达 ④ 的路径(46)
  - s②③④: 顶点 ③ 的最短路径上面计算过了, 是 41, 所以到顶点 ④ 的路径为 41+12=53
  - s②④: 顶点 ② 的最短路径为 21, 加上 ②-④ = 21+25 = 46
- 到达 ⑤ 的路径(61)
  - s①⑦⑤: 25 + 11 + 35 = 71, 这里⑦还未计算, 但是很明显 ①-⑦ 才是最短路径, 可以两条路都计算一下
  - s②③⑤: 41+20 = 61
  - ⑥-⑤, 这里很明显不划算, 不考虑
- 到达 ⑥ 的路径（69）
  - s②④⑥: 46+45 = 91
  - s②③⑤⑥: 61+8 = 69
- 到达 ⑦的路径(36)
  - s①⑦: 25+11= 36
  - s②③⑤⑦: 61+35 = 96, 这里就很明显, 到 ⑦ 不能从 ⑤ 经过
- 到达 ⑧ 的路径(31)
  - s①⑧: 25+6=31
  - 经过 ⑨-⑧ 不可能是最短路径, 所以不考虑
- 到达 ⑨ 的路径(64)
  - s①⑧⑨: 31+33=64
  - s①⑦⑨: 36+55=91
- 到达终点 t 的路径(81)
  - s①⑧⑨t: 64+18=82
  - s②③⑤t: 61+21=82
  - s②③⑤⑥t: 69+12=81

- 所以最短路径为 81,
- ==注:== 解题思路中, 部分不可能路径被排除



### 1.3.网络与最大流量

![20240127224330](https://cdn.jsdelivr.net/gh/xinyi1483/image@main/2024/20240127224330.png)



![20240127224359](https://cdn.jsdelivr.net/gh/xinyi1483/image@main/2024/20240127224359.png)



> 参考贪心算法, 优先选择最大流量的路径, 为了简便, 使用 t 代替单位数量

- ①③⑤⑥: 10
- ①②⑤⑥: 6
- ①④⑥: 5
- ①④②⑤⑥: 1
  - 因为 ②⑤ 已经使用了 6t, 所以只剩下了 1t
- ①③④⑤⑥: 1
  - 所以结果为 23t



> 解题过程

![20240127225642](https://cdn.jsdelivr.net/gh/xinyi1483/image@main/2024/20240127225642.png)



![20240127225758](https://cdn.jsdelivr.net/gh/xinyi1483/image@main/2024/20240127225758.png)

  

## 2.运筹方法

### 2.1.线性规划

![20240127231304](https://cdn.jsdelivr.net/gh/xinyi1483/image@main/2024/20240127231304.png)



> 解题思路
>
> 联立方程

- 设 I 产品为 x 吨, II 产品为 y 吨, 求 9x + 12y 的极值
  1. x + y  ≤ 4
  2. 4x + 3y ≤ 12
  3. x + 3y ≤ 6
- 联立方程组
  - 根据 1 和 2 求解得, x=0, y=4, 将结果代入 3 中, 得到 x+3y=12, 超过 3 的数量, 也就是丙的原料数量 (x)
  - 根据 1 和 3 求解得, x=3, y=1, 将结果代入 2 中, 得到 4x+3y=15, 超过乙的原料数量 (x)
  - 根据 2 和 3 求解得, x=2,y=4/3, 将结果代入 1 中, 得到 x+y=10/3, 未超过甲的原料数量 (√)
- 将结果 x=2,y=4/3 代入 9x+12y=9 * 2 + 12 * (4/3) = 34
- 所以==最大利润为 34==
- 将 x=2,y=4/3 代入三个方程中, 计算甲乙丙三种原料的剩余情况
  - 甲: x+y=2+ (4/3) ＜ 4, 有剩余
  - 乙: 4x + 3y = (4 * 2) + (3 * (4/3)) = 12, 无剩余
  - 丙: x + 3y = 2 + 3 * (4/3) = 6, 无剩余
- 所以最终结果: 最大利润为 34万元, 原料甲有剩余





> 图示法

![20240127233611](https://cdn.jsdelivr.net/gh/xinyi1483/image@main/2024/20240127233611.png)



> 解题方法

- 如果不等式数量不多, 可以尝试联立方程组求解, 然后将结果代入其他不等式中查看是否符合
  - 就是方程组间两个两个试, 试出来的结果代入其他不等式中查看是否符合
- 如果不等式数量多, 建议画图缩小范围, 将交点代入方程中



### 2.2.动态规划
测试vscode提交




























































